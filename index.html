<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Study Bank v4.2</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* --- ãƒ‡ã‚¶ã‚¤ãƒ³å®šç¾© --- */
        :root {
            --bg-color: #F5F7FA;
            --text-color: #2C3E50;
            --accent-color: #6AB187;
            --danger-color: #e74c3c;
            --bonus-color: #f39c12;
            --card-bg: #FFFFFF;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Hiragino Kaku Gothic ProN", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 480px;
            text-align: center;
            padding-bottom: 90px;
        }

        h1 { font-size: 1.4rem; margin-bottom: 1.5rem; opacity: 0.9; }

        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* UIãƒ‘ãƒ¼ãƒ„ */
        .card {
            background: var(--card-bg);
            border: 2px solid var(--text-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 4px 4px 0px rgba(44, 62, 80, 0.1);
            position: relative;
        }

        .label { font-size: 0.9rem; font-weight: bold; display: block; margin-bottom: 5px; color: #555; }
        .big-number { font-size: 2.5rem; font-weight: bold; }
        .unit { font-size: 1rem; margin-left: 5px; }

        input[type="text"], input[type="number"], select, textarea {
            width: 100%; padding: 12px; font-size: 1rem;
            border: 2px solid var(--text-color); border-radius: 8px; box-sizing: border-box;
            margin-bottom: 10px; text-align: center; outline: none; background: #FAFAFA; color: var(--text-color);
        }

        button {
            width: 100%; padding: 14px; font-size: 1rem; font-weight: bold; color: white;
            border: none; border-radius: 8px; cursor: pointer; margin-bottom: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: transform 0.1s;
        }
        button:active { transform: translateY(2px); }

        .btn-study { background-color: var(--text-color); }
        .btn-game { background-color: var(--accent-color); }
        .btn-stop { background-color: var(--danger-color); }
        .btn-bonus { background-color: var(--bonus-color); }
        
        .btn-undo {
            background-color: #95a5a6; margin-top: 5px; width: auto; 
            display: inline-block; padding: 8px 20px; font-size: 0.9rem;
        }
        
        .undo-area {
            display:none; margin-top:10px; border-top:1px dashed #ccc; padding-top:10px;
            animation: fadeIn 0.5s;
        }

        /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 300; justify-content: center; align-items: center;
            animation: fadeIn 0.3s;
        }
        .modal-content {
            background: white; width: 85%; max-width: 400px; max-height: 80vh; overflow-y: auto;
            border-radius: 12px; padding: 25px; position: relative; text-align: left;
        }
        .close-btn { position: absolute; top: 10px; right: 15px; font-size: 1.5rem; cursor: pointer; color: #999; }

        /* å·¦ä¸Šã®ã‚¢ã‚¤ã‚³ãƒ³ç¾¤ */
        .icon-btn {
            position: fixed; left: 15px; width: 40px; height: 40px;
            border-radius: 50%; background: white; border: 2px solid var(--text-color);
            color: var(--text-color); font-weight: bold; font-size: 1.2rem;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; z-index: 200; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .help-btn { top: 15px; }
        .bag-btn { top: 65px; background: var(--bonus-color); color: white; border-color: #d35400; }

        /* ãƒœãƒ¼ãƒŠã‚¹è¡¨ç¤º */
        .bonus-badge {
            background: var(--bonus-color); color: white; padding: 5px 10px;
            border-radius: 20px; font-size: 0.8rem; font-weight: bold;
            display: inline-block; margin-bottom: 10px; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .nav-bar {
            position: fixed; bottom: 0; left: 0; width: 100%; background: white;
            display: flex; justify-content: space-around; padding: 12px 0;
            border-top: 2px solid var(--text-color); z-index: 100;
        }
        .nav-item {
            font-size: 0.8rem; color: #aaa; cursor: pointer; flex: 1; text-align: center;
            display: flex; flex-direction: column; align-items: center;
        }
        .nav-item span { font-size: 1.2rem; margin-bottom: 2px; }
        .nav-item.active { color: var(--text-color); font-weight: bold; }

        /* å±¥æ­´ãƒ»ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ */
        .history-list { list-style: none; padding: 0; max-height: 200px; overflow-y:auto; }
        .history-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #ddd; font-size: 0.9rem; }
        .pagination { display: flex; justify-content: space-between; margin-top: 10px; align-items: center;}
        
        /* ã‚°ãƒ©ãƒ•æ“ä½œ */
        .chart-controls { display: flex; justify-content: space-between; margin-bottom: 10px; align-items: center; }
        .chart-date-range { font-size: 0.8rem; font-weight: bold; }

        /* ãƒ­ã‚°è¡¨ç¤º */
        .update-log-area {
            background: rgba(255,255,255,0.8);
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 10px;
            text-align: left;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .log-date { font-size: 0.75rem; color: #666; display: block; margin-top: 8px; }
        .log-ver { color: var(--accent-color); font-weight: bold; margin-right: 5px; }

        .negative { color: var(--danger-color) !important; }
        #loginPage { margin-top: 5vh; }
    </style>
</head>
<body>

<!-- ã‚¢ã‚¤ã‚³ãƒ³ãƒœã‚¿ãƒ³ -->
<div class="icon-btn help-btn" onclick="openModal('helpModal')">ï¼Ÿ</div>
<div class="icon-btn bag-btn" onclick="openBag()">ğŸ’</div>

<!-- ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="helpModal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('helpModal')">Ã—</span>
        <h2 style="margin-top:0; text-align:center;">ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</h2>
        <p><b>ğŸ  ãƒ›ãƒ¼ãƒ </b><br>å‹‰å¼·æ™‚é–“ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚é–“é•ãˆãŸæ™‚ã¯ã€ç›´å¾Œãªã‚‰ã€Œâ†©ï¸ å–ã‚Šæ¶ˆã—ã€ãƒœã‚¿ãƒ³ã§å‰Šé™¤ã§ãã¾ã™ã€‚</p>
        <p><b>ğŸ’ ãƒªãƒ¥ãƒƒã‚¯</b><br>ç´¯è¨ˆã§3æ™‚é–“å‹‰å¼·ã™ã‚‹ã”ã¨ã«ã€Œ2å€ãƒã‚±ãƒƒãƒˆã€ã‚’1æšãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆï¼ã“ã“ãã¨ã„ã†æ™‚ã«ä½¿ãŠã†ã€‚</p>
        <p><b>ğŸ‘› å¸³ç°¿</b><br>ä½¿ã£ãŸãŠé‡‘ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚åæ”¯ãŒãƒã‚¤ãƒŠã‚¹ã«ãªã‚‹ã¨ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒã‚ã‚‹ã®ã§æ³¨æ„ï¼</p>
        <p><b>ğŸ® ã‚²ãƒ¼ãƒ </b><br>è²¯ã‚ãŸæ™‚é–“ã§éŠã¹ã¾ã™ã€‚ã€Œè¨˜éŒ²ã®ã¿ã€ã‹ã‚‰æ‰‹å‹•å…¥åŠ›ã‚‚å¯èƒ½ã§ã™ã€‚</p>
        <p><b>ğŸ“Š è¨˜éŒ²</b><br>éå»ã®ã‚°ãƒ©ãƒ•ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚çŸ¢å°ãƒœã‚¿ãƒ³ã§é€±ã‚’ç§»å‹•ã§ãã¾ã™ã€‚</p>
    </div>
</div>

<!-- ãƒªãƒ¥ãƒƒã‚¯(æŒã¡ç‰©)ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="bagModal" class="modal">
    <div class="modal-content" style="text-align:center;">
        <span class="close-btn" onclick="closeModal('bagModal')">Ã—</span>
        <h2 style="margin-top:0;">ğŸ’ æŒã¡ç‰©</h2>
        <div class="card" style="background:#fff8e1; border-color:#f39c12;">
            <span class="label" style="color:#d35400;">ãŠé‡‘2å€ãƒã‚±ãƒƒãƒˆ</span>
            <span class="big-number" id="ticketCountDisplay">0</span><span class="unit">æš</span>
            <p style="font-size:0.85rem; color:#666; margin:10px 0;">
                å‹‰å¼·3æ™‚é–“ã«ã¤ã1æšé…å¸ƒã€‚<br>ä½¿ã†ã¨24æ™‚é–“ã€ç²å¾—é‡‘é¡ãŒ2å€ï¼
            </p>
            <button class="btn-bonus" onclick="useTicket()">ãƒã‚±ãƒƒãƒˆã‚’ä½¿ã†</button>
        </div>
        <p id="bonusStatusText" style="font-size:0.9rem; font-weight:bold; color:var(--bonus-color);"></p>
    </div>
</div>

<!-- Tipsãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="tipsModal" class="modal">
    <div class="modal-content" style="background:#f0f8ff; border: 4px solid var(--accent-color);">
        <span class="close-btn" onclick="closeModal('tipsModal')">Ã—</span>
        <h3 style="margin-top:0; color:var(--text-color); text-align:center;">ğŸ’¡ Today's Tip</h3>
        <p id="tipContent" style="font-size:1rem; line-height:1.6; margin:20px 0; white-space: pre-wrap;"></p>
        <div id="tipAuthor" style="text-align:right; font-size:0.9rem; color:#666; font-weight:bold;"></div>
        <button class="btn-study" onclick="closeModal('tipsModal')" style="margin-top:20px;">é–‰ã˜ã‚‹</button>
    </div>
</div>

<!-- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="backupModal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('backupModal')">Ã—</span>
        <h2>ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h2>
        <textarea id="backupText" rows="6" readonly onclick="this.select()"></textarea>
        <button class="btn-study" onclick="copyBackup()">ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
        <hr>
        <textarea id="restoreText" rows="4" placeholder="ã“ã“ã«è²¼ã‚Šä»˜ã‘"></textarea>
        <button class="btn-stop" onclick="restoreData()">å¾©å…ƒã™ã‚‹</button>
    </div>
</div>

<div class="container">

    <!-- 1. ãƒ­ã‚°ã‚¤ãƒ³ -->
    <div id="loginPage" class="page active">
        <h1>STUDY BANK v4.2</h1>
        <div class="card">
            <p class="label">ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›</p>
            <form onsubmit="login(event)">
                <input type="text" id="usernameInput" placeholder="åå‰" maxlength="10" required>
                <button type="submit" class="btn-study">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            </form>
            <div style="margin-top:10px;">
                <small onclick="openModal('backupModal')" style="text-decoration:underline; cursor:pointer; color:#666;">ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ</small>
            </div>
        </div>

        <!-- ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå±¥æ­´ (å…¨å±¥æ­´) -->
        <div class="update-log-area">
            <h3 style="margin-top:0; text-align:center; border-bottom:1px solid #ddd; padding-bottom:5px;">ğŸ“œ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå±¥æ­´</h3>
            
            <span class="log-date">2026/01/19 18:20</span>
            <div><span class="log-ver">v4.2</span>éå»ã®å‹‰å¼·æ™‚é–“ã«å¿œã˜ã¦ãƒã‚±ãƒƒãƒˆã‚’é¡ã£ã¦é…å¸ƒã™ã‚‹ã‚ˆã†ä¿®æ­£</div>

            <span class="log-date">2026/01/19 18:00</span>
            <div><span class="log-ver">v4.1</span>å–ã‚Šæ¶ˆã—æ©Ÿèƒ½ã®ä¿®æ­£ã€Tipså¤§å¹…å¢—é‡(90ç¨®)ã€ã‚°ãƒ©ãƒ•ã®é€±ç§»å‹•æ©Ÿèƒ½ã‚’è¿½åŠ </div>

            <span class="log-date">2026/01/18</span>
            <div><span class="log-ver">v4.0</span>ã€Œ2å€ãƒã‚±ãƒƒãƒˆã€æ©Ÿèƒ½ã€è±†çŸ¥è­˜è¡¨ç¤ºã€Undoæ©Ÿèƒ½ã®å®Ÿè£…</div>

            <span class="log-date">2026/01/15</span>
            <div><span class="log-ver">v3.4</span>ãƒ˜ãƒ«ãƒ—ã‚¬ã‚¤ãƒ‰(ï¼Ÿãƒœã‚¿ãƒ³)ã®è¿½åŠ ã€UIèª¿æ•´</div>

            <span class="log-date">2026/01/12</span>
            <div><span class="log-ver">v3.3</span>ã€Œã‚³ãƒ¼ã‚¹é¸æŠæ©Ÿèƒ½(å³ã—ã‚ã€œã¬ã‚‹ã¾æ¹¯)ã€ã®å®Ÿè£…</div>

            <span class="log-date">2026/01/10</span>
            <div><span class="log-ver">v3.2</span>å¸³ç°¿å±¥æ­´ã®ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ(100ä»¶ã¾ã§ä¿å­˜)</div>

            <span class="log-date">2026/01/05</span>
            <div><span class="log-ver">v3.1</span>ãŠå°é£ã„è¨ˆç®—ãƒ¬ãƒ¼ãƒˆã®èª¿æ•´ (1åˆ†1.5å††åŒ–)</div>

            <span class="log-date">2025/12/28</span>
            <div><span class="log-ver">v3.0</span>å¸³ç°¿(Wallet)æ©Ÿèƒ½ã€ãƒšãƒŠãƒ«ãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¤ãƒãƒ¼ã®å®Ÿè£…</div>

            <span class="log-date">2025/12/20</span>
            <div><span class="log-ver">v2.0</span>ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒãƒ¼æ©Ÿèƒ½ã€ã‚°ãƒ©ãƒ•è¡¨ç¤ºã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã®å®Ÿè£…</div>

            <span class="log-date">2025/12/10</span>
            <div><span class="log-ver">v1.0</span>Study Bank ãƒªãƒªãƒ¼ã‚¹ã€‚å‹‰å¼·æ™‚é–“ã‚’è²¯é‡‘ã—ã¦éŠã¶åŸºæœ¬æ©Ÿèƒ½ã®å®Ÿè£…</div>
        </div>
    </div>

    <!-- 2. ãƒ›ãƒ¼ãƒ  -->
    <div id="homePage" class="page">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
            <h1 style="margin:0;">HOME</h1>
            <small onclick="logout()" style="text-decoration:underline; cursor:pointer; color:#999;">Logout</small>
        </div>

        <div id="bonusIndicator" class="bonus-badge" style="display:none;">
            âœ¨ ãŠé‡‘2å€ãƒ¢ãƒ¼ãƒ‰ç™ºå‹•ä¸­ï¼
        </div>

        <div class="card">
            <span class="label">éŠã¹ã‚‹æ™‚é–“ (æ®‹é«˜)</span>
            <span class="big-number" id="balanceDisplay">0</span><span class="unit">åˆ†</span>
        </div>

        <div class="card" style="border-color: var(--accent-color); cursor:pointer;" onclick="showPage('walletPage', document.getElementById('navWallet'))">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <div>
                    <span class="label" style="color:var(--accent-color);">ç¾åœ¨ã®ãŠè²¡å¸ƒ</span>
                    <span class="big-number" style="font-size:1.8rem; color:var(--accent-color);" id="moneyDisplayHome">0</span><span class="unit">å††</span>
                </div>
                <span style="font-size:1.5rem;">ğŸ‘› &gt;</span>
            </div>
        </div>

        <div class="card">
            <span class="label">âœï¸ å‹‰å¼·ã‚’è¨˜éŒ²</span>
            <div style="margin-bottom:15px; text-align:left;">
                <label class="label" style="font-size:0.8rem;">ã‚³ãƒ¼ã‚¹é¸æŠ</label>
                <select id="courseSelect" onchange="changeCourse()">
                    <option value="hard">ğŸ”¥ å³ã—ã‚ (0.5å††/åˆ†)</option>
                    <option value="normal">ğŸš¶ æ™®é€š (1.0å††/åˆ†)</option>
                    <option value="easy">â™¨ï¸ ã¬ã‚‹ã¾æ¹¯ (1.5å††/åˆ†)</option>
                </select>
            </div>
            <input type="number" id="studyInput" placeholder="åˆ†" min="1">
            <button class="btn-study" onclick="addStudy()">ï¼‹ è¨˜éŒ²ã™ã‚‹</button>
            
            <!-- Undo (Study) -->
            <div id="studyUndoArea" class="undo-area">
                <span style="font-size:0.8rem; color:#666;">ç›´å‰ã®è¨˜éŒ²(å‹‰å¼·)ã‚’å–ã‚Šæ¶ˆã—ã¾ã™ã‹ï¼Ÿ</span><br>
                <button class="btn-undo" onclick="undoLastAction()">â†©ï¸ å–ã‚Šæ¶ˆã™</button>
            </div>
        </div>
    </div>

    <!-- 3. ã‚¦ã‚©ãƒ¬ãƒƒãƒˆ -->
    <div id="walletPage" class="page">
        <h1>WALLET</h1>
        <div class="card">
            <span class="label">æ®‹é«˜</span>
            <span class="big-number" id="walletBalanceDisplay">0</span><span class="unit">å††</span>
            <div id="penaltyWarning" style="display:none; color:var(--danger-color); font-size:0.85rem; margin-top:10px; font-weight:bold;">
                âš ï¸ æ®‹é«˜ãŒãƒã‚¤ãƒŠã‚¹ã§ã™ï¼æ˜æ—¥ãƒšãƒŠãƒ«ãƒ†ã‚£ç™ºç”Ÿï¼
            </div>
        </div>
        <div class="card">
            <span class="label">ğŸ’¸ æ”¯å‡ºã‚’è¨˜éŒ²</span>
            <input type="text" id="expenseItem" placeholder="ç”¨é€”" required>
            <input type="number" id="expenseCost" placeholder="é‡‘é¡" min="1">
            <button class="btn-study" style="background-color:#7f8c8d;" onclick="addExpense()">ï¼ è¨˜éŒ²ã™ã‚‹</button>
            
            <!-- Undo (Expense) -->
            <div id="expenseUndoArea" class="undo-area">
                <span style="font-size:0.8rem; color:#666;">ç›´å‰ã®è¨˜éŒ²(æ”¯å‡º)ã‚’å–ã‚Šæ¶ˆã—ã¾ã™ã‹ï¼Ÿ</span><br>
                <button class="btn-undo" onclick="undoLastAction()">â†©ï¸ å–ã‚Šæ¶ˆã™</button>
            </div>
        </div>
        <div class="card">
            <span class="label">å±¥æ­´</span>
            <ul id="expenseList" class="history-list"></ul>
            <div class="pagination">
                <button class="btn-undo" onclick="changeWalletPage(-1)">å‰ã¸</button>
                <span id="pageIndicator">1/1</span>
                <button class="btn-undo" onclick="changeWalletPage(1)">æ¬¡ã¸</button>
            </div>
        </div>
    </div>

    <!-- 4. ã‚²ãƒ¼ãƒ  -->
    <div id="timerPage" class="page">
        <h1>GAME</h1>
        <div class="card">
            <div id="timerSetup">
                <span class="label">â±ï¸ ã‚¿ã‚¤ãƒãƒ¼è¨­å®š</span>
                <input type="number" id="timerInput" placeholder="åˆ†" min="1">
                <button class="btn-game" onclick="startTimer()">â–¶ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            </div>
            <div id="timerActive" style="display:none;">
                <span class="label" style="color:var(--accent-color);">PLAYING...</span>
                <div id="endTimeDisplay" style="font-size:0.9rem;"></div>
                <div id="timerDisplay">00:00</div>
                <button class="btn-stop" onclick="stopTimerManual()">â–  çµ‚äº†</button>
            </div>
        </div>
        <div class="card">
            <span class="label">ğŸ“ æ‰‹å‹•ã§è¨˜éŒ²</span>
            <input type="number" id="manualGameInput" placeholder="åˆ†" min="1">
            <button class="btn-game" style="opacity:0.7;" onclick="addGameManual()">è¨˜éŒ²ã®ã¿</button>
            
            <!-- Undo (Game) -->
            <div id="gameUndoArea" class="undo-area">
                <span style="font-size:0.8rem; color:#666;">ç›´å‰ã®è¨˜éŒ²(ã‚²ãƒ¼ãƒ )ã‚’å–ã‚Šæ¶ˆã—ã¾ã™ã‹ï¼Ÿ</span><br>
                <button class="btn-undo" onclick="undoLastAction()">â†©ï¸ å–ã‚Šæ¶ˆã™</button>
            </div>
        </div>
    </div>

    <!-- 5. ãƒ‡ãƒ¼ã‚¿ -->
    <div id="statsPage" class="page">
        <h1>DATA</h1>
        <div class="card">
            <!-- ã‚°ãƒ©ãƒ•æ“ä½œãƒœã‚¿ãƒ³ -->
            <div class="chart-controls">
                <button class="btn-undo" style="width:auto; margin:0;" onclick="shiftChartWeek(1)">ï¼œ å‰ã®é€±</button>
                <span id="chartRangeDisplay" class="chart-date-range"></span>
                <button class="btn-undo" style="width:auto; margin:0;" onclick="shiftChartWeek(-1)">æ¬¡ã®é€± ï¼</button>
            </div>
            <canvas id="myChart"></canvas>
        </div>
        <div class="card" style="text-align:left;">
             ç´¯è¨ˆå‹‰å¼·: <b id="totalStudyStat">0</b> åˆ†<br>
             ç´¯è¨ˆã‚²ãƒ¼ãƒ : <b id="totalGameStat">0</b> åˆ†
        </div>
    </div>
</div>

<div class="nav-bar" id="navBar" style="display:none;">
    <div class="nav-item active" onclick="showPage('homePage', this)"><span>ğŸ </span>HOME</div>
    <div class="nav-item" id="navWallet" onclick="showPage('walletPage', this)"><span>ğŸ‘›</span>å¸³ç°¿</div>
    <div class="nav-item" onclick="showPage('timerPage', this)"><span>ğŸ®</span>ã‚²ãƒ¼ãƒ </div>
    <div class="nav-item" onclick="showPage('statsPage', this)"><span>ğŸ“Š</span>è¨˜éŒ²</div>
</div>

<script>
// --- Tipsãƒ‡ãƒ¼ã‚¿ (90å€‹ä»¥ä¸Š) ---
const TIPS_DB = [
    "ã€æ¡œ (æ˜¥/å…¬åœ’)ã€‘æ—¥æœ¬ã®æ˜¥ã®è±¡å¾´ã€‚èŠ±è¨€è‘‰ã¯ã€Œç²¾ç¥ã®ç¾ã€ã€Œå„ªç¾ãªå¥³æ€§ã€ã€‚æ•£ã‚Šéš›ã®ç¾ã—ã•ã‹ã‚‰ã€æ­¦å£«é“ã¨ã‚‚çµã³ã¤ã‘ã‚‰ã‚Œã¾ã—ãŸã€‚",
    "ã€ãƒãƒ¥ãƒ¼ãƒªãƒƒãƒ— (æ˜¥/èŠ±å£‡)ã€‘ã‚ªãƒ©ãƒ³ãƒ€ãŒæœ‰åã§ã™ãŒåŸç”£ã¯ãƒˆãƒ«ã‚³ã€‚èŠ±è¨€è‘‰ã¯è‰²ã§é•ã„ã€èµ¤ã¯ã€Œæ„›ã®å‘Šç™½ã€ã€é»„è‰²ã¯ã€Œæœ›ã¿ã®ãªã„æ‹ã€ã§ã™ã€‚",
    "ã€ãƒãƒ¢ãƒ•ã‚£ãƒ© (æ˜¥/ä¸˜)ã€‘ã²ãŸã¡æµ·æµœå…¬åœ’ãŒæœ‰åã€‚åŒ—ç±³åŸç”£ã§ã€èŠ±è¨€è‘‰ã¯ã€Œå¯æ†ã€ã€Œã©ã“ã§ã‚‚æˆåŠŸã€ã€‚æ¾„ã‚“ã é’è‰²ãŒé­…åŠ›ã§ã™ã€‚",
    "ã€ã²ã¾ã‚ã‚Š (å¤/ç•‘)ã€‘å¤ªé™½ã‚’è¿½ã£ã¦å›ã‚‹ã“ã¨ã‹ã‚‰åä»˜ã‘ã‚‰ã‚Œã¾ã—ãŸã€‚èŠ±è¨€è‘‰ã¯ã€Œã‚ãªãŸã ã‘ã‚’è¦‹ã¤ã‚ã‚‹ã€ã€‚å®Ÿã¯å°ã•ãªèŠ±ã®é›†åˆä½“ã§ã™ã€‚",
    "ã€æœé¡” (å¤/åº­)ã€‘æ—©æœã«å’²ã„ã¦æ˜¼ã«ã¯ã—ã¼ã‚€å„šã„èŠ±ã€‚èŠ±è¨€è‘‰ã¯ã€Œã¯ã‹ãªã„æ‹ã€ã€Œå›ºã„çµ†ã€ã€‚æ±Ÿæˆ¸æ™‚ä»£ã«å“ç¨®æ”¹è‰¯ãƒ–ãƒ¼ãƒ ãŒã‚ã‚Šã¾ã—ãŸã€‚",
    "ã€ã‚³ã‚¹ãƒ¢ã‚¹ (ç§‹/è‰åŸ)ã€‘ãƒ¡ã‚­ã‚·ã‚³åŸç”£ã§ã€æ—¥æœ¬ã«ã¯æ˜æ²»æ™‚ä»£ã«æ¸¡æ¥ã€‚èŠ±è¨€è‘‰ã¯ã€Œä¹™å¥³ã®çœŸå¿ƒã€ã€‚ç§‹é¢¨ã«æºã‚Œã‚‹å§¿ãŒé¢¨æƒ…ãŒã‚ã‚Šã¾ã™ã€‚",
    "ã€å½¼å²¸èŠ± (ç§‹/ç”°ã‚“ã¼)ã€‘ãŠå½¼å²¸ã®é ƒã«å’²ãçœŸã£èµ¤ãªèŠ±ã€‚æ¯’ãŒã‚ã‚Šã€ãƒ¢ã‚°ãƒ©é™¤ã‘ã¨ã—ã¦å¢“åœ°ã‚„ç”°ã‚“ã¼ã®ç•¦é“ã«æ¤ãˆã‚‰ã‚Œã¾ã—ãŸã€‚èŠ±è¨€è‘‰ã¯ã€Œæƒ…ç†±ã€ã€Œç‹¬ç«‹ã€ã€‚",
    "ã€é‡‘æœ¨çŠ€ (ç§‹/åº­)ã€‘ç”˜ã„é¦™ã‚ŠãŒç§‹ã®è¨ªã‚Œã‚’å‘Šã’ã¾ã™ã€‚èŠ±è¨€è‘‰ã¯ã€Œè¬™è™šã€ã€Œæ°—é«˜ã„äººã€ã€‚ä¸­å›½ã§ã¯ãŠé…’ã‚„ãŠèŒ¶ã®é¦™ã‚Šä»˜ã‘ã«ã‚‚ä½¿ã‚ã‚Œã¾ã™ã€‚",
    "ã€ãƒã‚¤ãƒ³ã‚»ãƒã‚¢ (å†¬/å®¤å†…)ã€‘ã‚¯ãƒªã‚¹ãƒã‚¹ã®å®šç•ªã€‚èµ¤ã„éƒ¨åˆ†ã¯èŠ±ã§ã¯ãªãè‘‰ã£ã±ã§ã™ã€‚èŠ±è¨€è‘‰ã¯ã€Œç¥ç¦ã€ã€Œè–ãªã‚‹é¡˜ã„ã€ã€‚",
    "ã€æ¢… (å†¬ã€œæ˜¥/åº­)ã€‘å¯’ã•ã®ä¸­ã§ã„ã¡æ—©ãå’²ãç¸èµ·ã®è‰¯ã„èŠ±ã€‚èŠ±è¨€è‘‰ã¯ã€Œé«˜æ½”ã€ã€Œå¿è€ã€ã€‚å­¦å•ã®ç¥æ§˜ã€è…åŸé“çœŸå…¬ãŒæ„›ã—ãŸèŠ±ã§ã™ã€‚",
    "ã€ãƒ‘ãƒ³ã‚¸ãƒ¼ (æ˜¥/èŠ±å£‡)ã€‘äººã®é¡”ã®ã‚ˆã†ã«è¦‹ãˆã‚‹æ¨¡æ§˜ãŒç‰¹å¾´ã€‚èŠ±è¨€è‘‰ã¯ã€Œã‚‚ã®æ€ã„ã€ã€Œç§ã‚’æ€ã£ã¦ã€ã€‚ãƒ•ãƒ©ãƒ³ã‚¹èªã®ã€Œãƒ‘ãƒ³ã‚»(æ€è€ƒ)ã€ãŒç”±æ¥ã€‚",
    "ã€ã‚«ãƒ¼ãƒãƒ¼ã‚·ãƒ§ãƒ³ (æ˜¥/è´ˆã‚Šç‰©)ã€‘æ¯ã®æ—¥ã®å®šç•ªã€‚èµ¤ã¯ã€Œæ¯ã¸ã®æ„›ã€ã€ç™½ã¯ã€Œäº¡ãæ¯ã‚’å²ã¶ã€ã€‚å¤ä»£ã‚®ãƒªã‚·ãƒ£æ™‚ä»£ã‹ã‚‰æ ½åŸ¹ã•ã‚Œã¦ã„ã¾ã™ã€‚",
    "ã€ç´«é™½èŠ± (æ¢…é›¨/åº­)ã€‘åœŸã®é…¸æ€§åº¦ã§è‰²ãŒå¤‰ã‚ã‚‹ä¸æ€è­°ãªèŠ±ã€‚é…¸æ€§ã ã¨é’ã€ã‚¢ãƒ«ã‚«ãƒªæ€§ã ã¨èµ¤ã«ãªã‚Šã¾ã™ã€‚èŠ±è¨€è‘‰ã¯ã€Œç§»ã‚Šæ°—ã€ã€‚",
    "ã€ãƒ©ãƒ™ãƒ³ãƒ€ãƒ¼ (åˆå¤/åŒ—æµ·é“)ã€‘ãƒªãƒ©ãƒƒã‚¯ã‚¹åŠ¹æœã®ã‚ã‚‹é¦™ã‚ŠãŒç‰¹å¾´ã€‚èŠ±è¨€è‘‰ã¯ã€Œæ²ˆé»™ã€ã€Œæ¸…æ½”ã€ã€‚åŒ—æµ·é“å¯Œè‰¯é‡ã®ãƒ©ãƒ™ãƒ³ãƒ€ãƒ¼ç•‘ãŒæœ‰åã§ã™ã€‚",
    "ã€ç¡è“® (å¤/æ± )ã€‘æ°´é¢ã«æµ®ã‹ã¶ã‚ˆã†ã«å’²ãèŠ±ã€‚èŠ±è¨€è‘‰ã¯ã€Œæ¸…ç´”ãªå¿ƒã€ã€Œä¿¡é ¼ã€ã€‚å¤ä»£ã‚¨ã‚¸ãƒ—ãƒˆã§ã¯å¤ªé™½ã®ã‚·ãƒ³ãƒœãƒ«ã¨ã•ã‚Œã¾ã—ãŸã€‚",
    "ã€ã‚¹ã‚¹ã‚­ (ç§‹/å±±é‡)ã€‘ãŠæœˆè¦‹ã«æ¬ ã‹ã›ãªã„æ¤ç‰©ã€‚èŠ±è¨€è‘‰ã¯ã€Œæ´»åŠ›ã€ã€‚é­”é™¤ã‘ã®åŠ›ãŒã‚ã‚‹ã¨ä¿¡ã˜ã‚‰ã‚Œã¦ã„ã¾ã—ãŸã€‚",
    "ã€æ¤¿ (å†¬/åº­)ã€‘èŠ±ã”ã¨ãƒãƒˆãƒªã¨è½ã¡ã‚‹ã®ãŒç‰¹å¾´ã€‚èŠ±è¨€è‘‰ã¯ã€Œæ§ãˆã‚ãªå„ªã—ã•ã€ã€‚æ—¥æœ¬åŸç”£ã§ã€æµ·å¤–ã§ã‚‚ã€Œã‚«ãƒ¡ãƒªã‚¢ã€ã¨ã—ã¦äººæ°—ã€‚",
    "ã€ã‚·ã‚¯ãƒ©ãƒ¡ãƒ³ (å†¬/å®¤å†…)ã€‘å†¬ã®é‰¢æ¤ãˆã®ä»£è¡¨æ ¼ã€‚èŠ±è¨€è‘‰ã¯ã€Œé æ…®ã€ã€Œå†…æ°—ã€ã€‚ä¸‹ã‚’å‘ã„ã¦å’²ãå§¿ãŒæ¥ã˜ã‚‰ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ãŸã‚ã€‚",
    "ã€ã‚¬ãƒ¼ãƒ™ãƒ© (å››å­£/èŠ±å±‹)ã€‘æ˜ã‚‹ãé™½æ°—ãªé›°å›²æ°—ã®èŠ±ã€‚èŠ±è¨€è‘‰ã¯ã€Œå¸Œæœ›ã€ã€Œå¸¸ã«å‰é€²ã€ã€‚èŒã®ä¸­ã«ç©ºæ´ãŒã‚ã‚‹ã®ãŒç‰¹å¾´ã§ã™ã€‚",
    "ã€ãƒãƒ© (å››å­£/åº­)ã€‘èŠ±ã®å¥³ç‹ã€‚æœ¬æ•°ã§æ„å‘³ãŒå¤‰ã‚ã‚Šã€1æœ¬ã¯ã€Œä¸€ç›®æƒšã‚Œã€ã€100æœ¬ã¯ã€Œ100%ã®æ„›ã€ã€‚999æœ¬ã¯ã€Œä½•åº¦ç”Ÿã¾ã‚Œå¤‰ã‚ã£ã¦ã‚‚ã‚ãªãŸã‚’æ„›ã™ã‚‹ã€ã€‚",
    "ã€ã‚«ãƒŒãƒ¬ (ãƒ•ãƒ©ãƒ³ã‚¹)ã€‘ãƒœãƒ«ãƒ‰ãƒ¼åœ°æ–¹ã®ç„¼ãè“å­ã€‚å¤–ã¯ã‚«ãƒªã‚«ãƒªã€ä¸­ã¯ãƒ¢ãƒãƒ¢ãƒã€‚ãƒ¯ã‚¤ãƒ³ä½œã‚Šã§ä½™ã£ãŸåµé»„ã‚’ä½¿ã†ãŸã‚ã«ç”Ÿã¾ã‚Œã¾ã—ãŸã€‚",
    "ã€ãƒ†ã‚£ãƒ©ãƒŸã‚¹ (ã‚¤ã‚¿ãƒªã‚¢)ã€‘ã€Œç§ã‚’å…ƒæ°—ã¥ã‘ã¦ã€ã¨ã„ã†æ„å‘³ã®ãƒ‡ã‚¶ãƒ¼ãƒˆã€‚ã‚¨ã‚¹ãƒ—ãƒ¬ãƒƒã‚½ã¨ãƒã‚¹ã‚«ãƒ«ãƒãƒ¼ãƒãƒãƒ¼ã‚ºã®ç›¸æ€§ãŒæŠœç¾¤ã§ã™ã€‚",
    "ã€ãƒã‚¤ãƒ³ãƒŸãƒ¼ (ãƒ™ãƒˆãƒŠãƒ )ã€‘ãƒ•ãƒ©ãƒ³ã‚¹ãƒ‘ãƒ³ã«ãƒ¬ãƒãƒ¼ãƒ‘ãƒ†ã‚„é‡èœã€ãƒ‘ã‚¯ãƒãƒ¼ã‚’æŒŸã‚“ã ã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒã€‚æ¤æ°‘åœ°æ™‚ä»£ã®é£Ÿæ–‡åŒ–ãŒèåˆã—ã¦ç”Ÿã¾ã‚Œã¾ã—ãŸã€‚",
    "ã€ã‚·ãƒ¥ãƒˆãƒ¼ãƒ¬ãƒ³ (ãƒ‰ã‚¤ãƒ„)ã€‘ã‚¯ãƒªã‚¹ãƒã‚¹ã‚’å¾…ã¤é–“ã«å°‘ã—ãšã¤é£Ÿã¹ã‚‹ä¿å­˜é£Ÿã®ã‚ˆã†ãªã‚±ãƒ¼ã‚­ã€‚ãƒ‰ãƒ©ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„ã‚„ãƒŠãƒƒãƒ„ãŒãã£ã—ã‚Šã€‚",
    "ã€ãƒã‚«ãƒ­ãƒ³ (ãƒ•ãƒ©ãƒ³ã‚¹)ã€‘å®Ÿã¯ã‚¤ã‚¿ãƒªã‚¢ç™ºç¥¥èª¬ã‚‚ã€‚åµç™½ã¨ã‚¢ãƒ¼ãƒ¢ãƒ³ãƒ‰ãƒ—ãƒ¼ãƒ‰ãƒ«ã§ä½œã‚‹ç¹Šç´°ãªãŠè“å­ã€‚ãƒ‘ãƒªã‚¸ã‚§ãƒ³ãƒŒã«å¤§äººæ°—ã€‚",
    "ã€ã‚¬ãƒ‘ã‚ªãƒ©ã‚¤ã‚¹ (ã‚¿ã‚¤)ã€‘ã€Œã‚¬ãƒ‘ã‚ªã€ã¯ãƒ›ãƒ¼ãƒªãƒ¼ãƒã‚¸ãƒ«ã®ã“ã¨ã€‚é¶è‚‰ãªã©ã®ãƒã‚¸ãƒ«ç‚’ã‚ã”é£¯ã§ã™ã€‚ç›®ç‰ç„¼ãã‚’æ·»ãˆã‚‹ã®ãŒå®šç•ªã€‚",
    "ã€ãƒ•ã‚£ãƒƒã‚·ãƒ¥ï¼†ãƒãƒƒãƒ—ã‚¹ (ã‚¤ã‚®ãƒªã‚¹)ã€‘ç™½èº«é­šã®ãƒ•ãƒ©ã‚¤ã¨ãƒãƒ†ãƒˆã®ã‚»ãƒƒãƒˆã€‚ç”£æ¥­é©å‘½æ™‚ä»£ã€åŠ´åƒè€…ã®å®‰ä¾¡ãªã‚¨ãƒãƒ«ã‚®ãƒ¼æºã¨ã—ã¦æ™®åŠã—ã¾ã—ãŸã€‚",
    "ã€ã‚¿ã‚³ã‚¹ (ãƒ¡ã‚­ã‚·ã‚³)ã€‘ãƒˆã‚¦ãƒ¢ãƒ­ã‚³ã‚·ç²‰ã®ç”Ÿåœ°(ãƒˆãƒ«ãƒ†ã‚£ãƒ¼ãƒ¤)ã§å…·æã‚’åŒ…ã‚“ã æ–™ç†ã€‚ã‚µãƒ«ã‚µã‚½ãƒ¼ã‚¹ã‚’ãŸã£ã·ã‚Šã‹ã‘ã¦ã€‚",
    "ã€ãƒ”ãƒ­ã‚·ã‚­ (ãƒ­ã‚·ã‚¢)ã€‘å…·å…¥ã‚Šã®æšã’ãƒ‘ãƒ³ã€ã¾ãŸã¯ç„¼ããƒ‘ãƒ³ã€‚ä¸­èº«ã¯ã²ãè‚‰ã€ã‚­ãƒ£ãƒ™ãƒ„ã€åµã€æ˜¥é›¨ãªã©å®¶åº­ã«ã‚ˆã£ã¦æ§˜ã€…ã€‚",
    "ã€é£²èŒ¶ (ä¸­å›½)ã€‘ãŠèŒ¶ã‚’é£²ã¿ãªãŒã‚‰ç‚¹å¿ƒã‚’é£Ÿã¹ã‚‹ç¿’æ…£ã€‚åºƒæ±çœã§ç™ºå±•ã—ã¾ã—ãŸã€‚ã‚·ãƒ¥ãƒ¼ãƒã‚¤ã‚„ã‚¨ãƒ“é¤ƒå­ãŒäººæ°—ã€‚",
    "ã€ãƒ‘ã‚¨ãƒªã‚¢ (ã‚¹ãƒšã‚¤ãƒ³)ã€‘ãƒãƒ¬ãƒ³ã‚·ã‚¢åœ°æ–¹ã®ç±³æ–™ç†ã€‚ã‚µãƒ•ãƒ©ãƒ³ã§é»„è‰²ãè‰²ä»˜ã‘ã—ã¾ã™ã€‚æœ¬å ´ã§ã¯ã‚¦ã‚µã‚®è‚‰ã‚’å…¥ã‚Œã‚‹ã“ã¨ã‚‚ã€‚",
    "ã€ãƒ•ã‚©ãƒ¼ (ãƒ™ãƒˆãƒŠãƒ )ã€‘ç±³ç²‰ã§ä½œã£ãŸå¹³ãŸã„éººã€‚ç‰›éª¨ã‚„é¶ã‚¬ãƒ©ã®å„ªã—ã„ã‚¹ãƒ¼ãƒ—ã§é£Ÿã¹ã¾ã™ã€‚æœé£Ÿã®å®šç•ªã€‚",
    "ã€ã‚±ãƒãƒ– (ãƒˆãƒ«ã‚³)ã€‘è‚‰ã‚’ãƒ­ãƒ¼ã‚¹ãƒˆã—ãŸæ–™ç†ã®ç·ç§°ã€‚æ—¥æœ¬ã§è¦‹ã‹ã‘ã‚‹å›è»¢ã™ã‚‹è‚‰ã¯ã€Œãƒ‰ãƒãƒ«ã‚±ãƒãƒ–ã€ã¨è¨€ã„ã¾ã™ã€‚",
    "ã€éº»å©†è±†è… (ä¸­å›½)ã€‘å››å·çœç™ºç¥¥ã€‚å”è¾›å­ã®ã€Œè¾£(ãƒ©ãƒ¼)ã€ã¨èŠ±æ¤’ã®ã€Œéº»(ãƒãƒ¼)ã€ã®2ç¨®é¡ã®è¾›ã•ãŒç‰¹å¾´ã§ã™ã€‚",
    "ã€ã‚¶ãƒƒãƒãƒˆãƒ«ãƒ† (ã‚ªãƒ¼ã‚¹ãƒˆãƒªã‚¢)ã€‘ã‚¦ã‚£ãƒ¼ãƒ³ã®ãƒ›ãƒ†ãƒ«ãƒ»ã‚¶ãƒƒãƒãƒ¼ç™ºç¥¥ã®ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚±ãƒ¼ã‚­ã€‚ã‚¢ãƒ—ãƒªã‚³ãƒƒãƒˆã‚¸ãƒ£ãƒ ãŒã‚¢ã‚¯ã‚»ãƒ³ãƒˆã€‚",
    "ã€ã‚¿ãƒ„ãƒã‚ªãƒˆã‚·ã‚´ã€‘ã‚ªã‚¹ãŒè‚²å…åš¢ã¨ã„ã†è¢‹ã‚’æŒã¡ã€ãã“ã§åµã‚’è‚²ã¦ã¦å‡ºç”£ã™ã‚‹çã—ã„ç”Ÿãç‰©ã§ã™ã€‚",
    "ã€ã‚³ã‚¢ãƒ©ã€‘ãƒ¦ãƒ¼ã‚«ãƒªã®è‘‰ã«ã¯æ¯’ãŒã‚ã‚Šã¾ã™ãŒã€ã‚³ã‚¢ãƒ©ã¯ç‰¹åˆ¥ãªæ¶ˆåŒ–å™¨å®˜ã§æ¯’ã‚’åˆ†è§£ã§ãã¾ã™ã€‚å¯ã¦ã„ã‚‹æ™‚é–“ãŒã¨ã¦ã‚‚é•·ã„ã§ã™ã€‚",
    "ã€ã‚­ãƒªãƒ³ã€‘é¦–ãŒã¨ã¦ã‚‚é•·ã„ã§ã™ãŒã€é¦–ã®éª¨ã®æ•°ã¯äººé–“ã¨åŒã˜7å€‹ã§ã™ã€‚èˆŒã¯é»’ç´«è‰²ã§50cmã‚‚ã‚ã‚Šã¾ã™ã€‚",
    "ã€ãƒšãƒ³ã‚®ãƒ³ã€‘å—æ¥µã«ã„ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ãŒã€ã‚¬ãƒ©ãƒ‘ã‚´ã‚¹è«¸å³¶ãªã©æ¸©ã‹ã„å ´æ‰€ã«ä½ã‚€ç¨®é¡ã‚‚ã„ã¾ã™ã€‚ç©ºã¯é£›ã¹ã¾ã›ã‚“ãŒæ³³ãã¯é”äººã€‚",
    "ã€ãƒã‚·ãƒ“ãƒ­ã‚³ã‚¦ã€‘å‹•ã‹ãªã„é³¥ã¨ã—ã¦æœ‰åã€‚ç²ç‰©ãŒæ°´é¢ã«ä¸ŠãŒã£ã¦ãã‚‹ã®ã‚’ä½•æ™‚é–“ã‚‚ã˜ã£ã¨å¾…ã¡ä¼ã›ã—ã¦ã„ã¾ã™ã€‚",
    "ã€ã‚«ãƒ¢ãƒãƒã‚·ã€‘å“ºä¹³é¡ãªã®ã«åµã‚’ç”£ã‚€ä¸æ€è­°ãªå‹•ç‰©ã€‚ã‚¯ãƒãƒã‚·ãŒã‚ã‚Šã€å¾Œã‚è¶³ã«ã¯æ¯’ã®çˆªã‚’æŒã£ã¦ã„ã¾ã™ã€‚",
    "ã€ãƒŠãƒã‚±ãƒ¢ãƒã€‘é£Ÿäº‹ã‚‚ç¡çœ ã‚‚å‡ºç”£ã‚‚æœ¨ã®ä¸Šã§è¡Œã„ã¾ã™ã€‚å‹•ããŒé…ã™ãã¦ã€ä½“ã«è‹”ãŒç”Ÿãˆã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚",
    "ã€ãƒ‘ãƒ³ãƒ€ã€‘ç¬¹ã°ã‹ã‚Šé£Ÿã¹ã¦ã„ã¾ã™ãŒã€æ¶ˆåŒ–å™¨å®˜ã¯è‚‰é£Ÿå‹•ç‰©ã®ã¾ã¾ã€‚ãã®ãŸã‚æ „é¤Šå¸åç‡ãŒæ‚ªãã€ä¸€æ—¥ä¸­é£Ÿã¹ç¶šã‘ã¦ã„ã¾ã™ã€‚",
    "ã€ã‚·ãƒã‚¦ãƒã€‘åœ°è‚Œã¯é»’è‰²ã§ã€ç™½ã„æ¯›ã¨é»’ã„æ¯›ãŒç”Ÿãˆã¦ã„ã¾ã™ã€‚ç¸æ¨¡æ§˜ã¯è™«é™¤ã‘ã‚„ä½“æ¸©èª¿ç¯€ã®å½¹å‰²ãŒã‚ã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚",
    "ã€ã‚¤ãƒ«ã‚«ã€‘çœ ã‚‹æ™‚ã¯è„³ã®åŠåˆ†ãšã¤ä¼‘ã¾ã›ã¾ã™(åŠçƒç¡çœ )ã€‚æººã‚Œãªã„ã‚ˆã†ã«æ„è­˜ã‚’ä¿ã¡ãªãŒã‚‰æ³³ãç¶šã‘ã‚‹ãŸã‚ã§ã™ã€‚",
    "ã€å®‡å®™ã®åŒ‚ã„ã€‘å®‡å®™é£›è¡Œå£«ã«ã‚ˆã‚‹ã¨ã€å®‡å®™ç©ºé–“(èˆ¹å¤–æ´»å‹•å¾Œã®ã‚¹ãƒ¼ãƒ„)ã¯ã€Œç„¦ã’ãŸã‚¹ãƒ†ãƒ¼ã‚­ã€ã‚„ã€Œæº¶æ¥ã®ç…™ã€ã®ã‚ˆã†ãªåŒ‚ã„ãŒã™ã‚‹ãã†ã§ã™ã€‚",
    "ã€ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã€‘é‰›ç­†ã®èŠ¯ã¨åŒã˜ã€Œç‚­ç´ ã€ã§ã§ãã¦ã„ã¾ã™ã€‚åœ°çƒã®æ·±ã„å ´æ‰€ã§è¶…é«˜åœ§ãƒ»é«˜ç†±ã‚’å—ã‘ã¦çµæ™¶åŒ–ã—ã¾ã—ãŸã€‚",
    "ã€é›·ã€‘é›·ã®é›»åœ§ã¯æ•°å„„ãƒœãƒ«ãƒˆã«ã‚‚ãªã‚Šã¾ã™ãŒã€ä¸€ç¬ãªã®ã§ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨ã—ã¦æºœã‚ã‚‹ã®ã¯ç¾åœ¨ã®æŠ€è¡“ã§ã¯é›£ã—ã„ãã†ã§ã™ã€‚",
    "ã€è™¹ã€‘å®Ÿã¯åŠå††ã§ã¯ãªãã€Œå††å½¢ã€ã§ã™ã€‚åœ°ä¸Šã‹ã‚‰ã¯åœ°é¢ãŒé‚ªé­”ã§è¦‹ãˆã¾ã›ã‚“ãŒã€é£›è¡Œæ©Ÿã‹ã‚‰ã¯ä¸¸ã„è™¹ãŒè¦‹ãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚",
    "ã€é›²ã€‘é›²ã¯æ°´è’¸æ°—ã§ã¯ãªãã€å°ã•ãªæ°´æ»´ã‚„æ°·ã®ç²’ã®é›†ã¾ã‚Šã§ã™ã€‚æ°´è’¸æ°—ã¯ç›®ã«è¦‹ãˆã¾ã›ã‚“ã€‚",
    "ã€äººé–“ã®éª¨ã€‘èµ¤ã¡ã‚ƒã‚“ã¯ç´„305å€‹ã®éª¨ãŒã‚ã‚Šã¾ã™ãŒã€å¤§äººã«ãªã‚‹ã¨ç™’åˆã—ã¦ç´„206å€‹ã«æ¸›ã‚Šã¾ã™ã€‚",
    "ã€ã‚ãã³ã€‘è„³ã®æ¸©åº¦ã‚’ä¸‹ã’ã‚‹åŠ¹æœãŒã‚ã‚‹ã¨ã„ã†èª¬ãŒæœ‰åŠ›ã§ã™ã€‚çœ ã„æ™‚ã ã‘ã§ãªãã€ç·Šå¼µã—ãŸæ™‚ã«ã‚‚å‡ºã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚",
    "ã€æ¶™ã€‘æ‚²ã—ã„æ™‚ã ã‘ã§ãªãã€ç›®ã‚’å®ˆã‚‹ãŸã‚å¸¸ã«åˆ†æ³Œã•ã‚Œã¦ã„ã¾ã™ã€‚æ„Ÿæƒ…ã«ã‚ˆã‚‹æ¶™ã«ã¯ã‚¹ãƒˆãƒ¬ã‚¹ç‰©è³ªãŒå«ã¾ã‚Œã¦ã„ã‚‹ã¨ã‹ã€‚",
    "ã€1å††ç‰ã€‘ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ è£½ã§ã€æ°´ã«æµ®ãã¾ã™ã€‚å®Ÿã¯è£½é€ ã‚³ã‚¹ãƒˆã¯1æšã‚ãŸã‚Š1å††ä»¥ä¸Šã‹ã‹ã£ã¦ã„ã¾ã™ã€‚",
    "ã€ä¿¡å·æ©Ÿã€‘ç·‘è‰²ãªã®ã«ã€Œé’ä¿¡å·ã€ã¨å‘¼ã¶ã®ã¯ã€æ—¥æœ¬èªã®å¤èªã§ç·‘è‰²ã‚‚å«ã‚ã¦ã€Œã‚ãŠã€ã¨å‘¼ã‚“ã§ã„ãŸåæ®‹ã§ã™ã€‚",
    "ã€ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­æ³•ã€‘25åˆ†å‹‰å¼·ã—ã¦5åˆ†ä¼‘ã‚€ã€‚ã“ã‚Œã‚’ç¹°ã‚Šè¿”ã™ã¨é›†ä¸­åŠ›ãŒæŒç¶šã—ã‚„ã™ã„ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚",
    "ã€ã‚¨ãƒ“ãƒ³ã‚°ãƒã‚¦ã‚¹ã®å¿˜å´æ›²ç·šã€‘äººã¯è¦šãˆãŸã“ã¨ã‚’1æ™‚é–“å¾Œã«ã¯åŠåˆ†ä»¥ä¸Šå¿˜ã‚Œã¾ã™ã€‚å¾©ç¿’ãŒè¨˜æ†¶å®šç€ã®éµï¼",
    "ã€ãƒ„ã‚¡ã‚¤ã‚¬ãƒ«ãƒ‹ã‚¯åŠ¹æœã€‘ã‚„ã‚Šã‹ã‘ã®ä½œæ¥­ã®ã»ã†ãŒè¨˜æ†¶ã«æ®‹ã‚Šã‚„ã™ã„å¿ƒç†ç¾è±¡ã€‚ã‚­ãƒªã®æ‚ªã„ã¨ã“ã‚ã§ä¼‘æ†©ã™ã‚‹ã®ã‚‚ã‚¢ãƒªï¼Ÿ",
    "ã€é’è‰²ã®åŠ¹æœã€‘é’è‰²ã¯é®é™åŠ¹æœãŒã‚ã‚Šã€é›†ä¸­åŠ›ã‚’é«˜ã‚ã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚å‹‰å¼·éƒ¨å±‹ã«é’ã‚’å–ã‚Šå…¥ã‚Œã¦ã¿ã¦ã¯ã€‚",
    "ã€ç¡çœ å­¦ç¿’ã€‘å¯ã¦ã„ã‚‹é–“ã«è„³ã¯è¨˜æ†¶ã‚’æ•´ç†ã—ã¾ã™ã€‚å¾¹å¤œã™ã‚‹ã‚ˆã‚Šã€ã—ã£ã‹ã‚Šå¯ãŸã»ã†ãŒè¨˜æ†¶ã«æ®‹ã‚Šã¾ã™ã€‚",
    "ã€å ´æ‰€ãƒ‹ãƒ¥ãƒ¼ãƒ­ãƒ³ã€‘å ´æ‰€ã‚’å¤‰ãˆã¦å‹‰å¼·ã™ã‚‹ã¨ã€è„³ã®æµ·é¦¬ãŒåˆºæ¿€ã•ã‚Œã¦è¨˜æ†¶åŠ›ãŒã‚¢ãƒƒãƒ—ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚",
    "ã€éŸ³èª­ã€‘ç›®ã§è¦‹ã‚‹ã ã‘ã§ãªãã€å£°ã«å‡ºã—ã¦è€³ã§èãã“ã¨ã§ã€è„³ã®è¤‡æ•°ã®éƒ¨åˆ†ã‚’ä½¿ã£ã¦è¦šãˆã‚‰ã‚Œã¾ã™ã€‚",
    "ã€äººã«æ•™ãˆã‚‹ã€‘èª°ã‹ã«èª¬æ˜ã§ãã‚‹ãƒ¬ãƒ™ãƒ«ã¾ã§ç†è§£ã™ã‚‹ã¨ã€è¨˜æ†¶å®šç€ç‡ãŒåŠ‡çš„ã«ä¸ŠãŒã‚Šã¾ã™(ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ”ãƒ©ãƒŸãƒƒãƒ‰)ã€‚",
    "ã€ã”è¤’ç¾ã€‘ã€Œçµ‚ã‚ã£ãŸã‚‰ãƒãƒ§ã‚³ã‚’é£Ÿã¹ã‚‹ã€ãªã©ã€å°ã•ãªã”è¤’ç¾ã‚’è¨­å®šã™ã‚‹ã¨ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ãŒå‡ºã¦ã‚„ã‚‹æ°—ãŒå‡ºã¾ã™ã€‚",
    "ã€é‹å‹•ã€‘æœ‰é…¸ç´ é‹å‹•ã‚’ã™ã‚‹ã¨è„³ã®è¡€æµãŒå¢—ãˆã€è¨˜æ†¶ã‚’å¸ã‚‹æµ·é¦¬ãŒå¤§ãããªã‚‹ã¨ã„ã†ç ”ç©¶çµæœãŒã‚ã‚Šã¾ã™ã€‚",
    "ã€éå¸¸å£ã€‘éå¸¸å£ã®ãƒãƒ¼ã‚¯ã®ç·‘è‰²ã®äººã¯ã€Œãƒ”ã‚¯ãƒˆã•ã‚“ã€ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ã‚‚ã€‚èµ°ã£ã¦ã„ã‚‹å§¿ã¯ä¸–ç•Œå…±é€šã®ãƒ‡ã‚¶ã‚¤ãƒ³ã§ã™ã€‚",
    "ã€ãƒˆãƒ©ãƒ³ãƒ—ã€‘52æšã¯1å¹´ã®52é€±ã‚’è¡¨ã—ã¦ã„ã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚ãƒãƒ¼ã‚¯ã¯å››å­£(æ˜¥=ã‚¯ãƒ©ãƒ–ã€å¤=ãƒ€ã‚¤ãƒ¤ã€ç§‹=ãƒãƒ¼ãƒˆã€å†¬=ã‚¹ãƒšãƒ¼ãƒ‰)èª¬ã‚‚ã€‚",
    "ã€ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã€‘é¡ãŒã¤ã„ã¦ã„ã‚‹ã®ã¯èº«ã ã—ãªã¿ç”¨ã§ã¯ãªãã€è»Šæ¤…å­ã®æ–¹ãŒå¾Œã‚å‘ãã«å‡ºã‚‹æ™‚ã®ãƒãƒƒã‚¯ãƒŸãƒ©ãƒ¼ç”¨ã§ã™ã€‚",
    "ã€ãƒãƒŠãƒŠã€‘ãƒãƒŠãƒŠã®çš®ã§æ»‘ã‚‹ã®ã¯ç‰©ç†å­¦çš„ã«ã‚‚è¨¼æ˜ã•ã‚Œã¦ãŠã‚Šã€ã‚¤ã‚°ãƒ»ãƒãƒ¼ãƒ™ãƒ«è³ã‚’å—è³ã—ãŸç ”ç©¶ãŒã‚ã‚Šã¾ã™ã€‚",
    "ã€ä¸–ç•Œä¸€é•·ã„åœ°åã€‘ãƒ‹ãƒ¥ãƒ¼ã‚¸ãƒ¼ãƒ©ãƒ³ãƒ‰ã«ã‚ã‚‹ä¸˜ã®åå‰ã€‚ã€Œã‚¿ã‚¦ãƒã‚¿ãƒ•ã‚¡ã‚«ã‚¿ãƒ³ã‚®ãƒãƒ³ã‚¬ã‚³ã‚¢ã‚¦ã‚¢ã‚¦ã‚ªã‚¿ãƒãƒ†ã‚¢ãƒã‚«ã‚¤ãƒ•ã‚§ãƒŒã‚¢ã‚­ã‚¿ãƒŠã‚¿ãƒ•ã€ã§ã™ã€‚",
    "ã€ã‚­ã‚¦ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„ã€‘ãƒ‹ãƒ¥ãƒ¼ã‚¸ãƒ¼ãƒ©ãƒ³ãƒ‰ã®å›½é³¥ã€Œã‚­ãƒ¼ã‚¦ã‚£ã€ã«è¦‹ãŸç›®ãŒä¼¼ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰åä»˜ã‘ã‚‰ã‚Œã¾ã—ãŸã€‚",
    "ã€ã‚·ãƒ§ãƒ¼ãƒˆã‚±ãƒ¼ã‚­ã€‘æ—¥æœ¬ç™ºç¥¥ã®ã‚±ãƒ¼ã‚­ã§ã™ã€‚ã‚¢ãƒ¡ãƒªã‚«ãªã©ã§ã¯ãƒ“ã‚¹ã‚±ãƒƒãƒˆã®ã‚ˆã†ãªç”Ÿåœ°ã‚’ä½¿ã£ãŸã‚‚ã®ãŒä¸€èˆ¬çš„ã€‚",
    "ã€SOSã€‘å®Ÿã¯ã€ŒSave Our Soulsã€ãªã©ã®ç•¥èªã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ¢ãƒ¼ãƒ«ã‚¹ä¿¡å·ã§æ‰“ã¡ã‚„ã™ã„ã€Œãƒ»ãƒ»ãƒ» â€”â€”â€” ãƒ»ãƒ»ãƒ»ã€ãŒæ¡ç”¨ã•ã‚ŒãŸã ã‘ã€‚",
    "ã€ã‚«ãƒ³ã‚¬ãƒ«ãƒ¼ã€‘åå‰ã®ç”±æ¥ã¯ã€Œã‚ã‹ã‚‰ãªã„(Kangaroo)ã€ã¨å…ˆä½æ°‘ãŒç­”ãˆãŸã®ã‚’åå‰ã ã¨å‹˜é•ã„ã—ãŸèª¬â€¦ã¯å®Ÿã¯ä¿—èª¬ã‚‰ã—ã„ã§ã™ã€‚",
    "ã€å—æ¥µã€‘ã©ã“ã®å›½ã®ã‚‚ã®ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚å—æ¥µæ¡ç´„ã«ã‚ˆã‚Šã€å¹³å’Œåˆ©ç”¨ã¨ç§‘å­¦èª¿æŸ»ã®ãŸã‚ã«è‡ªç”±ã«ä½¿ãˆã¾ã™ã€‚",
    "ã€æ·±æµ·ã€‘å®‡å®™ã‚ˆã‚Šã‚‚è¬ãŒå¤šã„ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚äººé¡ãŒåˆ°é”ã—ãŸæœ€æ·±éƒ¨ã‚ˆã‚Šã‚‚æ·±ã„å ´æ‰€ã«ã¯ã€ã¾ã è¦‹ã¬ç”Ÿç‰©ãŒã„ã‚‹ã‹ã‚‚ã€‚",
    "ã€ãƒŸãƒ„ãƒãƒã€‘1åŒ¹ãŒä¸€ç”Ÿã‹ã‹ã£ã¦é›†ã‚ã‚‹ãƒãƒãƒŸãƒ„ã¯ã€ãƒ†ã‚£ãƒ¼ã‚¹ãƒ—ãƒ¼ãƒ³1æ¯åˆ†ã»ã©ã€‚å¤§åˆ‡ã«ã„ãŸã ãã¾ã—ã‚‡ã†ã€‚",
    "ã€ãƒ©ã‚¸ã‚ªä½“æ“ã€‘å®Ÿã¯ã‚¢ãƒ¡ãƒªã‚«ã®ä¿é™ºä¼šç¤¾ãŒå¥åº·å¢—é€²ã®ãŸã‚ã«è€ƒæ¡ˆã—ãŸä½“æ“ãŒå…ƒã«ãªã£ã¦ã„ã¾ã™ã€‚",
    "ã€ãƒœã‚¦ãƒªãƒ³ã‚°ã€‘ãƒ”ãƒ³ã‚’å€’ã™æ•°ã§ç«¶ã„ã¾ã™ãŒã€æ˜”ã¯å€’ã‚Œãªã‹ã£ãŸãƒ”ãƒ³ã®æ•°ã§ç«¶ã£ã¦ã„ãŸæ™‚ä»£ã‚‚ã‚ã£ãŸãã†ã§ã™ã€‚",
    "ã€é‰›ç­†ã€‘1æœ¬ã®é‰›ç­†ã§æ›¸ã‘ã‚‹ç·šã®é•·ã•ã¯ç´„50kmã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚ãƒ•ãƒ«ãƒãƒ©ã‚½ãƒ³ã‚ˆã‚Šé•·ã„ï¼",
    "ã€æ¶ˆã—ã‚´ãƒ ã€‘æœ€åˆã¯ãƒ‘ãƒ³ããšã‚’ä½¿ã£ã¦æ–‡å­—ã‚’æ¶ˆã—ã¦ã„ã¾ã—ãŸã€‚ã‚´ãƒ ã®ç™ºè¦‹ã«ã‚ˆã‚Šç¾åœ¨ã®å½¢ã«ã€‚",
    "ã€çŒ«ã®ãƒ’ã‚²ã€‘é€šã‚Œã‚‹éš™é–“ã®å¹…ã‚’æ¸¬ã‚‹ã‚»ãƒ³ã‚µãƒ¼ã®å½¹å‰²ãŒã‚ã‚Šã¾ã™ã€‚åˆ‡ã£ã¦ã—ã¾ã†ã¨å¹³è¡¡æ„Ÿè¦šãŒç‹‚ã†ã“ã¨ã‚‚ã€‚",
    "ã€çŠ¬ã®å—…è¦šã€‘äººé–“ã®100ä¸‡å€ã€œ1å„„å€ã¨ã‚‚è¨€ã‚ã‚Œã¾ã™ãŒã€å…¨ã¦ã®åŒ‚ã„ã«æ•æ„Ÿãªã‚ã‘ã§ã¯ãªãã€ç‰¹å®šã®åŒ‚ã„(æ±—ã‚„é…¸)ã«æ•æ„Ÿã§ã™ã€‚",
    "ã€ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯ã€‘é‡‘ãƒ¡ãƒ€ãƒ«ã¯ç´”é‡‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å®Ÿã¯éŠ€è£½ã§ã€è¡¨é¢ã«é‡‘ãƒ¡ãƒƒã‚­ãŒæ–½ã•ã‚Œã¦ã„ã¾ã™ã€‚",
    "ã€è‡ªç”±ã®å¥³ç¥ã€‘ã‚‚ã¨ã‚‚ã¨ã¯éŠ…è‰²(10å††ç‰ã®è‰²)ã§ã—ãŸã€‚é…¸åŒ–ã—ã¦ç¾åœ¨ã®ç·‘é’è‰²ã«ãªã‚Šã¾ã—ãŸã€‚",
    "ã€ã‚µã‚¶ã‚¨ã•ã‚“ã€‘ç™»å ´äººç‰©ã®å¹´é½¢è¨­å®šã€ã‚µã‚¶ã‚¨ã•ã‚“ã¯24æ­³ã€æ³¢å¹³ã•ã‚“ã¯54æ­³ã€‚æ„å¤–ã¨è‹¥ã„ï¼Ÿ",
    "ã€ãƒ‰ãƒ©ãˆã‚‚ã‚“ã€‘èº«é•·ã€ä½“é‡ã€èƒ¸å›²ã€åº§é«˜ãªã©ã€å…¨ã¦ã€Œ129.3ã€ã¨ã„ã†æ•°å­—ã§è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚",
    "ã€æœˆã€‘åœ°çƒã‹ã‚‰æ¯å¹´ç´„3.8cmãšã¤é ã–ã‹ã£ã¦ã„ã¾ã™ã€‚ã¯ã‚‹ã‹æœªæ¥ã§ã¯ã€æœˆã¯ã‚‚ã£ã¨å°ã•ãè¦‹ãˆã‚‹ã§ã—ã‚‡ã†ã€‚",
    "ã€å¤ªé™½ã€‘ç‡ƒãˆã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ãŒã€é…¸ç´ ãŒãªã„ã®ã§ã€Œç‡ƒç„¼ã€ã§ã¯ãªãã€Œæ ¸èåˆåå¿œã€ã§å…‰ã£ã¦ã„ã¾ã™ã€‚",
    "ã€ãƒ–ãƒ©ãƒƒã‚¯ãƒ›ãƒ¼ãƒ«ã€‘å…‰ã•ãˆã‚‚è„±å‡ºã§ããªã„ã»ã©é‡åŠ›ãŒå¼·ã„å¤©ä½“ã€‚æ™‚é–“ãŒã‚†ã£ãã‚Šæµã‚Œã‚‹ä¸æ€è­°ãªå ´æ‰€ã§ã™ã€‚",
    "èŠ±ã¡ã‚ƒã‚“Tipsã¯ä½•å€‹è¦‹ã¤ã‘ã‚‰ã‚ŒãŸã‹ãªï¼Ÿã‚‚ã—ã‹ã—ã¦ã“ã‚ŒãŒåˆã‚ã¦ã ã£ãŸã‚Šã™ã‚‹ï¼Ÿã‚¸ãƒ§ãƒ¼ã‚¯ã§ã‚‚è¨€ã£ãŸæ–¹ãŒã„ã„ã‹ãª...ã€ŒGeminiã¨ã‹ã‘ã¾ã—ã¦èŠ±ã¨è§£ãï¼ãã®å¿ƒã¯ã©ã¡ã‚‰ã‚‚å¤©æ‰ï¼ˆå¤©ç½ï¼‰ã§ã—ã‚‡ã†ã€byèŠ±",
    "æœ€è¿‘ã¯ãƒãƒ¼ãƒˆãƒ”ã‚¢ã‚¹ãƒ­ãƒ¼ãƒ©ã‚¤ãƒ•ã«ãƒãƒã£ã¦ã„ã‚‹ã‚ˆï¼å»ºç¯‰ã¨ã‹è¾²æ¥­ã¨ã‹ãŒæ¥½ã—ã„ã‚²ãƒ¼ãƒ ï¼é£¼ã£ã¦ã„ã‚‹çŠ¬ã®åå‰ã¯ã¶ã¡ä¸¸ï¼ŒçŒ«ã®åå‰ã¯ãã¿ã¾ã‚ã ã‚ˆï¼byèŠ±",
    "å‹‰å¼·ã‚’ã™ã‚‹ã¨ï¼Œã‚²ãƒ¼ãƒ ãŒã§ãã¦ï¼ŒãŠé‡‘ãŒè²¯ã¾ã£ã¦ï¼Œã“ã®ã™ã‚“ã°ã‚‰ã—ã„TipsãŒè¦‹ã‚‰ã‚Œã‚‹ã‚ˆï¼byèŠ±",
    "åƒè‘‰å·¥æ¥­å¤§å­¦æƒ…å ±å·¥å­¦ç§‘ã¯å¤§å¤‰ç´ æ™´ã‚‰ã—ã„å ´æ‰€ã§ã™ï¼å…ˆç”Ÿã¯å¤©ä½¿ã®ã‚ˆã†ã«å„ªã—ã„ï¼Œæ™‚é–“ã¯æœ‰ã‚Šä½™ã‚‹ã»ã©ã‚ã‚Šã¾ã™ï¼ã‚ãªãŸã‚‚æ¥ã¾ã›ã‚“ã‹ï¼ŸbyèŠ±",
    "å‹‰å¼·ã—ã¦ã„ã‚‹ã“ã¨è‡ªä½“ãŒå‰ã„ã®ã§é–“é•ãˆã¦ã‚‚å‡¹ã¾ãšã«ãƒ¤ãƒªã¾ã—ã‚‡ã†ï¼ã‚ã‚Œï¼Ÿæ–‡å­—ãŒé•ã†ã£ã¦ï¼Ÿ114514ã€œ byèŠ±",
    "è²¯ã‚ãŸãŠé‡‘ã§ä½•ã‚’è²·ã†ï¼ŸãŠè“å­ã‹æœ¬ã‹ï¼Œèª²é‡‘ã‹...ç§ã¯ä»Š1500å††ãƒªãƒ³ãƒã‚¹ã‚«ãƒ³ãƒ‘ãƒ‹ãƒ¼ã«èª²é‡‘ã—ã‚ˆã†ã‹è¿·ã£ã¦ã„ã¾ã™ï¼è‰¯ç§€ã‚ˆã‚ã—ã‚…ã byèŠ±",
    "æ™‚é–“ã£ã¦ã„ã¤ã‚‚ãªã„ã‚ˆã­ã€œå‹‰å¼·ã—ã¦ã„ã¦ã‚‚ã‚²ãƒ¼ãƒ ã—ã¦ã‚‚è¶³ã‚Šãªã„æ°—ãŒã™ã‚‹ã‚ˆã€œå¤§åˆ‡ã«éã”ã—ãŸã„ã‚ˆã­ï¼æ‰€ã§å­¦å‹ä¼šè¾ã‚ãŸã„ï¼byèŠ±",
    "ä»Šã®æµè¡Œã¯ã·ãã·ãã‚·ãƒ¼ãƒ«ã‚‰ã—ã„ï¼ã‚µãƒ³ãƒªã‚ªã®ã·ãã·ãã‚·ãƒ¼ãƒ«ã«5000äººãã‚‰ã„ãŒä¸¦ã‚“ã ã‚‰ã—ã„ã‚ˆ...ä½•ãŒæµè¡Œã‚‹ã‹ã‚ã‹ã‚“ã­ï¼byèŠ±",
    "ğŸµå®¹é‡ãŒãªã„ã“ã‚Œã¯èª°ã®ã›ã„ï¼Ÿå½“ã¦ã‚‚ãªããŸã å‰Šé™¤ã™ã‚‹ã‚¨ã‚¤ãƒ‡ã‚¤ï¼ãã‚Œã‚‚ãã£ã‹ï¼æœ€è¿‘ã®ã‚²ãƒ¼ãƒ ã¯å®¹é‡ãƒ‡ã‚«ã„ï¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«å¢—ãˆã¦ã„ãï¼æ¶ˆã›ã‚‹ã‚¢ãƒ—ãƒªã¯ã‚‚ã†ã‚ã‚Šã¾ã›ã‚“ï¼ã‚²ãƒ¼ãƒãƒ¼ã«ã¯å½“ç„¶ã®ãƒ«ãƒ¼ãƒ«ã§ã™ğŸµbyèŠ±",
    "èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±é¼»èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±èŠ±byèŠ±",
    "ã‚¬ãƒãƒ£ãŒå½“ãŸã‚‰ãªã„æ™‚ã¯ä½•ã‚’ã—ã¦ã‚‚å½“ãŸã‚Šã¾ã›ã‚“ï¼ç¥ã«ç¥ˆã‚‹ã®ã¯ç„¡é§„ã§ã™ï¼å¿ƒã‚’ç„¡å¿ƒã«ï¼Œå½“ãŸã£ã¦ã‚‚å¤–ã‚Œã¦ã‚‚å‹•æºã—ãªã„ãƒ—ãƒ­ã®ã‚¬ãƒãƒ£ãƒ©ãƒ¼ã«ãªã‚Šã¾ã—ã‚‡ã†ï¼byèŠ±", 
    "ã€Œæƒ³ã„ã¯æ­£ã—ãä¼ã‚ã‚‰ãªã„ã€ã‚­ãƒã®æ—…VIII",
    "ã€Œã‚ãªãŸã®ãã®æ‚²ã—ã¿ã¯ã€€ã‚„ãŒã¦ã‚ãªãŸã«ãªã‚‹ã€ã‚­ãƒã®æ—…IX",
    "ã€Œèª°ã ã£ã¦ã€æ‚ªã„ã“ã¨ã¯ã—ãªã„ã€‚èª°ã ã£ã¦ã€ä½•ãŒæ‚ªã„ã‹ã¯è‡ªåˆ†ã§æ±ºã‚ã¦ã„ã‚‹ã€‚ã€ã‚­ãƒã®æ—…XV"
];

function getOneTip() {
    return TIPS_DB[Math.floor(Math.random() * TIPS_DB.length)];
}

// --- ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° ---
let currentUser = null;
let userData = {
    logs: [],
    expenses: [],
    totalStudy: 0,
    totalGame: 0,
    totalEarned: 0,
    totalSpent: 0,
    courseMode: 'easy',
    timerEndTime: null,
    lastLoginDate: null,
    tickets: 0,
    ticketsEarnedCount: 0,
    bonusActiveUntil: 0,
    lastAction: null
};
let timerInterval = null;
let chartInstance = null;
let walletPage = 1;
let chartOffsetWeeks = 0; // 0=ä»Šé€±, 1=å…ˆé€±...

// ã‚³ãƒ¼ã‚¹è¨­å®š
const COURSES = { hard: {r:0.5, n:"å³ã—ã‚"}, normal: {r:1.0, n:"æ™®é€š"}, easy: {r:1.5, n:"ã¬ã‚‹ã¾æ¹¯"} };

// --- å…±é€šé–¢æ•° ---
function openModal(id) { document.getElementById(id).style.display = 'flex'; }
function closeModal(id) { document.getElementById(id).style.display = 'none'; }
function logout() { location.reload(); }

// --- 1. ãƒ­ã‚°ã‚¤ãƒ³ & ãƒ‡ãƒ¼ã‚¿ç®¡ç† ---
function login(e) {
    if(e) e.preventDefault();
    const name = document.getElementById('usernameInput').value.trim();
    if(!name) return;
    currentUser = name;
    
    loadData(); 
    checkPenalty();
    
    document.getElementById('loginPage').classList.remove('active');
    document.getElementById('homePage').classList.add('active');
    document.getElementById('navBar').style.display = 'flex';
    
    if(userData.timerEndTime) restoreTimer();
    updateUI();
    if("Notification" in window) Notification.requestPermission();
}

function loadData() {
    let stored = localStorage.getItem('studyBank_v4_' + currentUser);
    if (!stored) stored = localStorage.getItem('studyBank_v3_' + currentUser);

    if (stored) {
        userData = JSON.parse(stored);
        if(typeof userData.tickets === 'undefined') {
            // v4.2å¯¾å¿œ: ãƒã‚±ãƒƒãƒˆã®é¡åŠé…å¸ƒ
            const earned = Math.floor(userData.totalStudy / 180);
            userData.tickets = earned;
            userData.ticketsEarnedCount = earned;
            if(earned > 0) {
                 setTimeout(() => {
                   alert(`ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆç‰¹å…¸ã€‘\nã“ã‚Œã¾ã§ã®ç´¯è¨ˆå‹‰å¼·æ™‚é–“(${userData.totalStudy}åˆ†)ã«å¿œã˜ã¦\n2å€ãƒã‚±ãƒƒãƒˆã‚’ ${earned}æš ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã—ã¾ã—ãŸï¼\nğŸ’ãƒªãƒ¥ãƒƒã‚¯ã‚’ç¢ºèªã—ã¦ã­ã€‚`);
                }, 800);
            }
        }
        if(typeof userData.ticketsEarnedCount === 'undefined') userData.ticketsEarnedCount = Math.floor(userData.totalStudy / 180);
        if(typeof userData.bonusActiveUntil === 'undefined') userData.bonusActiveUntil = 0;
        if(typeof userData.lastAction === 'undefined') userData.lastAction = null;
    } else {
        userData = { 
            logs: [], expenses: [], 
            totalStudy: 0, totalGame: 0, totalEarned: 0, totalSpent: 0, 
            courseMode: 'easy', timerEndTime: null, 
            lastLoginDate: new Date().toLocaleDateString('ja-JP'),
            tickets: 0, ticketsEarnedCount: 0, bonusActiveUntil: 0, lastAction: null
        };
    }
    saveData();
}

function saveData() {
    userData.lastLoginDate = new Date().toLocaleDateString('ja-JP');
    localStorage.setItem('studyBank_v4_' + currentUser, JSON.stringify(userData));
    // updateUIã¯ã“ã“ã§ã¯å‘¼ã°ãªã„(é »åº¦ãŒé«˜ã„ãŸã‚)ã€‚å¿…è¦ãªç®‡æ‰€ã§å‘¼ã¶ã€‚
}

// --- 2. å‹‰å¼·è¨˜éŒ² & ãƒã‚±ãƒƒãƒˆ & Tips ---
function changeCourse() {
    userData.courseMode = document.getElementById('courseSelect').value;
    saveData();
}

function addStudy() {
    const mins = parseInt(document.getElementById('studyInput').value);
    if (!mins || mins <= 0) return;

    const isBonus = Date.now() < userData.bonusActiveUntil;
    let rate = COURSES[userData.courseMode].r;
    if(isBonus) rate *= 2; 

    const earnedMoney = Math.floor(mins * rate);
    const today = new Date().toLocaleDateString('ja-JP');
    
    // ä¸€æ„ãªIDã¨ã—ã¦ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ä½¿ç”¨ï¼ˆå³å¯†ãªUndoã®ãŸã‚ï¼‰
    const logId = Date.now();
    const log = { id: logId, date: today, type: 'study', minutes: mins, earned: earnedMoney };
    
    userData.logs.push(log);
    userData.totalStudy += mins;
    userData.totalEarned += earnedMoney;

    const totalHours = Math.floor(userData.totalStudy / 180);
    let ticketMsg = "";
    if (totalHours > userData.ticketsEarnedCount) {
        const newTickets = totalHours - userData.ticketsEarnedCount;
        userData.tickets += newTickets;
        userData.ticketsEarnedCount = totalHours;
        ticketMsg = `\nğŸ‰ ãƒã‚±ãƒƒãƒˆ${newTickets}æšç²å¾—ï¼`;
    }

    userData.lastAction = { type: 'study', logId: logId, ticketsGot: (ticketMsg !== "") };

    document.getElementById('studyInput').value = '';
    saveData();
    updateUI(); // UIæ›´æ–°

    if (mins >= 10) {
        const tip = getOneTip();
        document.getElementById('tipContent').innerText = typeof tip === 'string' ? tip : tip.text; // DBãŒæ–‡å­—åˆ—ã‹Objã‹
        document.getElementById('tipAuthor').innerText = ""; 
        openModal('tipsModal');
    } else {
        alert(`${mins}åˆ†è¨˜éŒ²ã—ã¾ã—ãŸã€‚${earnedMoney}å†† è²¯é‡‘ï¼${ticketMsg}`);
    }
}

// --- 3. Undo æ©Ÿèƒ½ (ä¿®æ­£ç‰ˆ) ---
function undoLastAction() {
    if (!userData.lastAction) return alert("å–ã‚Šæ¶ˆã›ã‚‹æ“ä½œãŒã‚ã‚Šã¾ã›ã‚“");
    
    const act = userData.lastAction;
    
    if (act.type === 'study') {
        // logsã‹ã‚‰è©²å½“IDã‚’æ¢ã™
        const idx = userData.logs.findIndex(l => l.id === act.logId);
        if (idx === -1) return alert("æ—¢ã«å–ã‚Šæ¶ˆã•ã‚Œã¦ã„ã‚‹ã‹ã€ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        
        const log = userData.logs[idx];
        if(!confirm(`${log.minutes}åˆ†ã®å‹‰å¼·è¨˜éŒ²ã‚’å–ã‚Šæ¶ˆã—ã¾ã™ã‹ï¼Ÿ`)) return;

        userData.totalStudy -= log.minutes;
        userData.totalEarned -= log.earned;
        userData.logs.splice(idx, 1); // å‰Šé™¤

        if (act.ticketsGot) {
            userData.tickets = Math.max(0, userData.tickets - 1);
            userData.ticketsEarnedCount--;
        }
    } 
    else if (act.type === 'game') {
        const idx = userData.logs.findIndex(l => l.id === act.logId);
        if (idx === -1) return alert("ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        
        const log = userData.logs[idx];
        if(!confirm(`${log.minutes}åˆ†ã®ã‚²ãƒ¼ãƒ è¨˜éŒ²ã‚’å–ã‚Šæ¶ˆã—ã¾ã™ã‹ï¼Ÿ`)) return;

        userData.totalGame -= log.minutes;
        userData.logs.splice(idx, 1);
    } 
    else if (act.type === 'expense') {
        const idx = userData.expenses.findIndex(e => e.id === act.logId);
        if (idx === -1) return alert("ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        
        const exp = userData.expenses[idx];
        if(!confirm(`ã€Œ${exp.item}ã€ã®æ”¯å‡ºã‚’å–ã‚Šæ¶ˆã—ã¾ã™ã‹ï¼Ÿ`)) return;

        userData.totalSpent -= exp.cost;
        userData.expenses.splice(idx, 1);
    }

    userData.lastAction = null;
    saveData();
    updateUI();
    alert("å–ã‚Šæ¶ˆã—ã¾ã—ãŸã€‚");
}

// --- 4. ãƒªãƒ¥ãƒƒã‚¯ & ãƒã‚±ãƒƒãƒˆ ---
function openBag() {
    updateUI();
    openModal('bagModal');
}
function useTicket() {
    if (userData.tickets <= 0) return alert("ãƒã‚±ãƒƒãƒˆãŒã‚ã‚Šã¾ã›ã‚“");
    if (confirm("ãƒã‚±ãƒƒãƒˆã‚’æ¶ˆè²»ã—ã¦ã€24æ™‚é–“ãŠé‡‘ã‚’2å€ã«ã—ã¾ã™ã‹ï¼Ÿ")) {
        userData.tickets--;
        userData.bonusActiveUntil = Date.now() + (24 * 60 * 60 * 1000);
        saveData();
        updateUI();
        alert("ãƒœãƒ¼ãƒŠã‚¹ç™ºå‹•ï¼");
        openBag();
    }
}

// --- 5. æ”¯å‡º ---
function addExpense() {
    const item = document.getElementById('expenseItem').value;
    const cost = parseInt(document.getElementById('expenseCost').value);
    if (!item || !cost) return;

    const now = new Date();
    const dateStr = now.toLocaleDateString('ja-JP') + " " + now.getHours() + ":" + String(now.getMinutes()).padStart(2,'0');
    const logId = Date.now();
    const exp = { id: logId, date: dateStr, item: item, cost: cost };
    
    userData.expenses.push(exp);
    if(userData.expenses.length > 100) userData.expenses.shift();
    userData.totalSpent += cost;
    
    userData.lastAction = { type: 'expense', logId: logId };
    
    document.getElementById('expenseItem').value = '';
    document.getElementById('expenseCost').value = '';
    saveData();
    updateUI();
    alert(`è¨˜éŒ²ã—ã¾ã—ãŸã€‚æ®‹é«˜: ${(userData.totalEarned - userData.totalSpent)}å††`);
}

function changeWalletPage(d) {
    walletPage += d;
    updateUI();
}

// --- 6. ã‚²ãƒ¼ãƒ  & ã‚¿ã‚¤ãƒãƒ¼ ---
function startTimer() {
    const mins = parseInt(document.getElementById('timerInput').value);
    const balance = userData.totalStudy - userData.totalGame;
    if (!mins || mins <= 0) return alert("å…¥åŠ›ã—ã¦ãã ã•ã„");
    if (mins > balance) return alert("æ®‹é«˜ä¸è¶³ã§ã™");

    userData.timerEndTime = Date.now() + mins * 60000;
    userData.currentTimerMins = mins;
    saveData();
    setupTimerUI(userData.timerEndTime);
}
function setupTimerUI(endTime) {
    document.getElementById('timerSetup').style.display='none';
    document.getElementById('timerActive').style.display='block';
    if(timerInterval) clearInterval(timerInterval);
    timerInterval = setInterval(()=>{
        const diff = endTime - Date.now();
        if(diff<=0) finishTimerAuto();
        else {
            const m=Math.floor(diff/60000); const s=Math.floor((diff%60000)/1000);
            document.getElementById('timerDisplay').innerText = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        }
    },500);
}
function restoreTimer() {
    if(Date.now() < userData.timerEndTime) {
        showPage('timerPage', document.querySelectorAll('.nav-item')[2]);
        setupTimerUI(userData.timerEndTime);
    } else {
        finishTimerAuto();
    }
}
function finishTimerAuto() {
    clearInterval(timerInterval);
    if(userData.timerEndTime) {
        const mins = userData.currentTimerMins;
        const logId = Date.now();
        const log = { id: logId, date: new Date().toLocaleDateString('ja-JP'), type:'game', minutes:mins };
        userData.logs.push(log);
        userData.totalGame += mins;
        userData.lastAction = { type: 'game', logId: logId };
        
        userData.timerEndTime = null;
        userData.currentTimerMins = null;
        saveData();
        updateUI();
        alert("æ™‚é–“ã§ã™ï¼");
        if(Notification.permission==="granted") new Notification("Study Bank", {body:"çµ‚äº†æ™‚é–“ã§ã™"});
    }
    resetTimerUI();
}
function stopTimerManual() {
    if(!confirm("çµ‚äº†ã—ã¾ã™ã‹ï¼Ÿ")) return;
    finishTimerAuto();
}
function addGameManual() {
    const mins = parseInt(document.getElementById('manualGameInput').value);
    const balance = userData.totalStudy - userData.totalGame;
    if(!mins || mins>balance) return alert("å…¥åŠ›ã‚¨ãƒ©ãƒ¼ã¾ãŸã¯æ®‹é«˜ä¸è¶³");
    
    const logId = Date.now();
    const log = { id: logId, date: new Date().toLocaleDateString('ja-JP'), type:'game', minutes:mins };
    userData.logs.push(log);
    userData.totalGame += mins;
    userData.lastAction = { type: 'game', logId: logId };
    
    saveData();
    updateUI();
    document.getElementById('manualGameInput').value='';
    alert(`${mins}åˆ†è¨˜éŒ²ã—ã¾ã—ãŸ`);
}
function resetTimerUI() {
    document.getElementById('timerSetup').style.display='block';
    document.getElementById('timerActive').style.display='none';
    document.getElementById('timerInput').value='';
}

// --- 7. UIæ›´æ–° ---
function updateUI() {
    document.getElementById('courseSelect').value = userData.courseMode;
    document.getElementById('balanceDisplay').innerText = userData.totalStudy - userData.totalGame;
    
    const money = userData.totalEarned - userData.totalSpent;
    document.getElementById('moneyDisplayHome').innerText = money.toLocaleString();
    document.getElementById('walletBalanceDisplay').innerText = money.toLocaleString();
    
    // ãƒœãƒ¼ãƒŠã‚¹è¡¨ç¤º
    const isBonus = Date.now() < userData.bonusActiveUntil;
    document.getElementById('bonusIndicator').style.display = isBonus ? 'inline-block' : 'none';
    if(document.getElementById('bagModal').style.display !== 'none') {
        document.getElementById('ticketCountDisplay').innerText = userData.tickets;
        document.getElementById('bonusStatusText').innerText = isBonus ? "ğŸ”¥ ç¾åœ¨2å€ãƒœãƒ¼ãƒŠã‚¹é©ç”¨ä¸­ï¼" : "ãƒœãƒ¼ãƒŠã‚¹æœªç™ºå‹•";
    }

    // Undoãƒœã‚¿ãƒ³åˆ¶å¾¡: ç›´å‰ã®ã‚¿ã‚¤ãƒ—ã«åˆã‚ã›ã¦è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
    const la = userData.lastAction;
    document.getElementById('studyUndoArea').style.display = (la && la.type === 'study') ? 'block' : 'none';
    document.getElementById('gameUndoArea').style.display = (la && la.type === 'game') ? 'block' : 'none';
    document.getElementById('expenseUndoArea').style.display = (la && la.type === 'expense') ? 'block' : 'none';

    // å¸³ç°¿ãƒªã‚¹ãƒˆ
    const list = document.getElementById('expenseList');
    list.innerHTML = "";
    const all = userData.expenses.slice().reverse();
    const maxPage = Math.ceil(all.length/5) || 1;
    if(walletPage < 1) walletPage = 1;
    if(walletPage > maxPage) walletPage = maxPage;
    
    const pageData = all.slice((walletPage-1)*5, walletPage*5);
    if(pageData.length===0) list.innerHTML = "<li style='text-align:center;color:#999'>å±¥æ­´ãªã—</li>";
    else {
        pageData.forEach(ex => {
            const li = document.createElement('li');
            li.className = 'history-item';
            li.innerHTML = `<div><span class="date-small">${ex.date}</span> ${ex.item}</div><b>-${ex.cost}</b>`;
            list.appendChild(li);
        });
    }
    document.getElementById('pageIndicator').innerText = `${walletPage}/${maxPage}`;
    
    if(document.getElementById('statsPage').classList.contains('active')) renderChart();
}

function checkPenalty() {
    const today = new Date().toLocaleDateString('ja-JP');
    if(userData.lastLoginDate && userData.lastLoginDate !== today) {
        if((userData.totalEarned - userData.totalSpent) < 0) {
            alert("æ˜¨æ—¥ã®åæ”¯ãŒãƒã‚¤ãƒŠã‚¹ã§ã—ãŸã€‚ãƒšãƒŠãƒ«ãƒ†ã‚£: ã‚²ãƒ¼ãƒ æ™‚é–“-60åˆ†");
            userData.totalGame += 60;
            saveData();
        }
    }
}

// --- 8. ã‚°ãƒ©ãƒ•æ©Ÿèƒ½ (é€±ç§»å‹•) ---
function shiftChartWeek(offset) {
    chartOffsetWeeks += offset;
    // æœªæ¥ã«ã¯è¡Œã‘ãªã„ã‚ˆã†ã«ã™ã‚‹
    if(chartOffsetWeeks < 0) chartOffsetWeeks = 0;
    renderChart();
}

function showPage(id, item) {
    document.querySelectorAll('.page').forEach(e=>e.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelectorAll('.nav-item').forEach(e=>e.classList.remove('active'));
    if(item) item.classList.add('active');
    if(id==='statsPage') {
        chartOffsetWeeks = 0; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ä»Šé€±
        renderChart();
    }
}

function renderChart() {
    const ctx = document.getElementById('myChart').getContext('2d');
    
    // è¡¨ç¤ºæœŸé–“ã®è¨ˆç®—
    // ä»Šæ—¥ã®æ—¥ä»˜ã‚’å–å¾—ã—ã€chartOffsetWeeks * 7æ—¥åˆ† å¼•ã
    const baseDate = new Date();
    baseDate.setDate(baseDate.getDate() - (chartOffsetWeeks * 7));
    
    // æœŸé–“è¡¨ç¤ºç”¨
    const endDateStr = baseDate.toLocaleDateString('ja-JP');
    const tempStartDate = new Date(baseDate);
    tempStartDate.setDate(tempStartDate.getDate() - 6);
    const startDateStr = tempStartDate.toLocaleDateString('ja-JP');
    
    document.getElementById('chartRangeDisplay').innerText = `${startDateStr} ã€œ ${endDateStr}`;

    const labels=[], sData=[], gData=[];
    
    // éå»7æ—¥åˆ†ç”Ÿæˆ (å¤ã„é † or æ–°ã—ã„é †? Chart.jsã¯é€šå¸¸å·¦ãŒå¤ã„)
    // ã“ã“ã§ã¯å·¦(6æ—¥å‰) -> å³(ä»Šæ—¥) ã®é †ã§ä½œã‚‹
    for(let i=6; i>=0; i--) {
        const d = new Date(baseDate); 
        d.setDate(d.getDate() - i);
        const ds = d.toLocaleDateString('ja-JP'); // "2026/1/19"
        
        labels.push(ds.slice(5)); // "1/19"
        
        sData.push(userData.logs.filter(l=>l.date===ds && l.type==='study').reduce((a,b)=>a+b.minutes,0));
        gData.push(userData.logs.filter(l=>l.date===ds && l.type==='game').reduce((a,b)=>a+b.minutes,0));
    }
    
    if(chartInstance) chartInstance.destroy();
    chartInstance = new Chart(ctx, {
        type: 'bar',
        data: { labels, datasets: [{label:'å‹‰å¼·',data:sData,backgroundColor:'#2C3E50'}, {label:'ã‚²ãƒ¼ãƒ ',data:gData,backgroundColor:'#6AB187'}] },
        options: { scales:{y:{beginAtZero:true}}, animation: {duration: 500} }
    });
    
    document.getElementById('totalStudyStat').innerText = userData.totalStudy;
    document.getElementById('totalGameStat').innerText = userData.totalGame;
}

// ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ©Ÿèƒ½
function copyBackup() {
    const text = JSON.stringify(userData);
    document.getElementById('backupText').value = text;
    document.getElementById('backupText').select();
    document.execCommand('copy');
    alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚");
}
function restoreData() {
    try {
        const data = JSON.parse(document.getElementById('restoreText').value);
        if(data.totalStudy !== undefined) {
            userData = data;
            saveData();
            updateUI();
            alert("å¾©å…ƒã—ã¾ã—ãŸï¼");
            closeModal('backupModal');
        } else {
            alert("ãƒ‡ãƒ¼ã‚¿å½¢å¼ãŒé•ã„ã¾ã™");
        }
    } catch(e) {
        alert("å¾©å…ƒã«å¤±æ•—ã—ã¾ã—ãŸ");
    }
}
</script>
</body>
</html>
